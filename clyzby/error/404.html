<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>404 - Page Not Found</title>
</head>
<body>

</body>
</html>
<style>
  body {
    background-color: #000;
    margin: 0;
  }
</style>
<script src="clyzby/p5js/js/libraries/p5.js"></script>
<script>
  let points;
  let cs = [];
  let l = [];
  let c;
  let r;
  let font;

  function preload() {
    font = loadFont('clyzby/files/@custom/fonts/RubikMonoOne-Regular.ttf');
  }

  function setup() {

    createCanvas(windowWidth, windowHeight);
    background(0);


    r = 1;
    textFont(font);
    textSize(300);
//    stroke(100, 0, 0);
    points = font.textToPoints("404", width / 2 - 420, height / 2);
    for (let j = 0; j < points.length; j++) {
      cs[j] = new L(points[j].x, points[j].y, 0, 0, 10, null);
    }

    generate();
    background(0);
  }

  function draw() {

    for (let i = 0; i < l.length - 1; i++) {
      l[i].show();
      l[i].update();

      for (let j = 0; j < cs.length; j++) {
        if (l[i].collision(cs[j])) {
          // l.splice(i, 1)
          l[i].stop = true;
        }
      }
    }
    if (l.length <= 1) {
      setTimeout(function () {
        background(0);
        generate();
        r = random(100)

      }, 2000)
    }
  }

  function generate() {
    for (let i = 0; i < 800; i++) {
      let index = i % cs.length;
      c = cs[index];
      let choice = floor(random(4));
      if (choice === 0) {
        l[i] = new L(random(width * random(1, choice)), 0, 0, 0, 1, c)
      } else if (choice === 1) {
        l[i] = new L(0, random(height * random(1, choice/2)), 0, 0, 1, c)
      } else if (choice === 2) {
        l[i] = new L(width, random(height * random(1, choice)), 0, 0, 1, c)
      } else {
        l[i] = new L(random(width), height * random(1, choice/2), 0, 0, 1, c)
      }
    }
  }

  function L(x, y, ax, ay, r, body) {
    this.pos = createVector(x, y);
    this.vel = createVector(random(1), random(1));
    this.acc = createVector(ax, ay);
    this.r = r;
    this.body = body;
    this.prev = createVector();
    this.stop = false
  }

  L.prototype.update = function () {
    if (!this.stop) {
      this.pos.add(this.vel);
      this.vel.add(this.acc);
      this.acc.mult(0);

      let des = p5.Vector.sub(this.body.pos, this.pos);
      des.setMag(r);
      let steer = p5.Vector.sub(des, this.vel);
      steer.limit(3);
      let randomI = random(4);
      steer.add(createVector(random(-randomI, randomI), random(-randomI, randomI)));
      this.acc.add(steer);
//      this.vel.add(createVector(noise(randomI), noise(randomI)));
    }
  };

  L.prototype.collision = function (b) {
    let d = p5.Vector.dist(this.pos, b.pos);
    if (d < (this.r + this.body.r) / 2) {
      return true;
    } else {
      return false;
    }
  };

  L.prototype.show = function () {
    stroke(map(mouseY, 0, height, 0, 255, true), map(mouseX, 0, width, 0, 255, true), map(mouseY, 0, height, 0, 255, true) );
    ellipse(this.pos.x, this.pos.y, this.r)
  };
</script>